# 游戏主循环大修改方案

## 整体框架
游戏模拟一个 ACMer 选手的大学四年生活
- **开始时间**：第一年 9 月
- **结束时间**：第五年 6 月
- **游戏周期**：约 4 年 9 个月的完整竞技生涯

---

## 年度事件日程

### 3 月 - 邀请赛抢名额
- 触发名额选择事件
- 可选择参赛或跳过
- 如参赛则需选择队友（如已有预定队友则直接出队）

### 4 月 - xcpc省赛
- 省级竞赛
- 需要提前选择队友
- 决定是否参加

### 5 月 - 邀请赛
- 邀请赛事件
- 类似 3 月流程

### 6 月 - 期末周
- **学业审核期**
- GPA < 3.0：触发挂科 buff
- GPA < 2.5：触发学业警告 buff
- 影响后续事件解锁

### 7 月 - 多校集训比赛
- 多校集训系列比赛
- 提升队伍实力的重要时期

### 9 月 - 网络预选赛
- 秋季网络预选赛
- 为区域赛做准备

### 10 月-12 月 - 亚洲区域赛
- 持续三个月的区域赛季
- **关键机制**：概率刷出赛站，争取抢外卡名额
  - 赛站数量越多，中签外卡的几率越少
  - 需要策略性选择是否争抢
- 可获得多个晋级名额

### 1 月 - 期末周
- 同 6 月的期末周机制
- 再次学业审核

---

## 学业系统

### GPA 机制
- **初始值**：3.2
- **每月扣除**：基础月度扣除（自动进行）
- **触发条件**：一个月不去上课有几率额外扣除平时分（即扣除 GPA）

### 期末周审核（6月、1月）
- **GPA 3.0-3.2**：正常
- **GPA < 3.0**：触发 **挂科 buff**
- **GPA < 2.5**：触发 **学业警告 buff**

### Buff 积累机制
- **挂科 buff**：
  - 可以重复触发
  - 累计 3 次挂科 → 获得 1 个学业警告 buff
  
- **学业警告 buff**：
  - 累计 2 个学业警告 → **进入退学结局**（游戏结束）
  - 可能解锁特殊事件

### 高 GPA 奖励
- **GPA ≥ 3.7**：获得 **奖学金**
- 提供经济或属性加成

---

## 队友与参赛系统

### 队友选择
- **何时选择**：
  - 参加大比赛前（3月邀请赛、4月省赛、5月邀请赛）需提前选队友
  - 不参加则无需选择
  
### 默认队友
游戏默认解锁以下两个角色：
- **陆任佳**（所有属性 1）
- **路仁义**（所有属性 1）

### 队友解锁
- 通过事件逐步解锁新队友
- 每个队友有独立的属性数值

### 参赛选择
- 每项赛事可自主选择参加或跳过
- 影响 GPA 扣除速度和事件触发
- 影响最终结局

---

## 结局系统

### 胜利结局（暂定）
- 通过一定数量的大赛获胜
- 最终 GPA 保持在可接受范围

### 失败结局
- **退学结局**：累计 2 个学业警告
- 其他可能的结局（待扩展）

---

## 实现优先级

1. **第一阶段**：
   - 时间推进系统（月份管理）
   - GPA 系统（初始化、月度扣除、期末审核）
   - 基础事件系统

2. **第二阶段**：
   - 队友解锁与选择系统
   - 大比赛流程（参赛、组队、结果）
   - Buff 积累与触发

3. **第三阶段**：
   - 结局判定
   - 事件触发完善
   - 平衡性调整
